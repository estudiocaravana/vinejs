<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>vine.js demo</title>
		<link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA1BMVEV/y+Bw0/5KAAAADElEQVQImWNgIA0AAAAwAAFDlLdnAAAAAElFTkSuQmCC" />
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
		<style>
			#chooser select {
				display: block;
				margin: 0.5em auto;	
			}
			#main {
				overflow: auto;
				max-width: 600px;
				margin: 0 auto;
				text-align: center;
			}
			iframe {
				margin: 10px;
				float: left;
				width: 180px;
				height: 180px;
				border: none;
				background-color: #EEE;
			}
		</style>
	</head>
	<body>
		<div id="chooser">
			<select>
				<option value='#cats'>#cats</option>
				<option value='#dogs'>#dogs</option>
				<option value='#cats OR #dogs'>#cats OR #dogs</option>
				<option value='{ "geocode": "39.730426,-104.927673,10mi", "q": "cat OR dog" }'>Denver Pets</option>
			</select>
		</div>
		<div id="main"></div>

		<script src="../vine.js"></script>
		<script>
		(function () {
			var $main = $("#main");
			var $selector = $("#chooser select");

			$selector.change(function (e) {
				var query = $selector.val();
				if (query.slice(0,1) == "{") {
					query = JSON.parse(query);	
				}
				var search = new Vine.Search(query);
				search.fetch(function () {
					var $iframes = $.map(this.results.slice(0,9), function (r) {
						return $("<iframe src='" + r.card + "'></iframe>");
					});
					$main.html($iframes);
					if (!this.results.length) {
						$main.html("No vines found.");	
					}
				}, function (e) {
					console.log(e);
					$main.html("Error.");	
				});
			}).change();

		}).call(this);
		</script>
	</body>
</html>
